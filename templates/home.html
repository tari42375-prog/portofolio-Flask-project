{% extends 'layout.html' %}
{% block title %}Dashboard Admin{% endblock %}
{% block head %}
<title>Halaman Home</title>
{% endblock %}
{% block body %}
<h1>Dashboard Admin</h1>

<a href="{{ url_for('logout') }}" class="btn btn-danger mb-3">Logout</a>
<h4>Profil</h4>
{% if profil %}
<div class="card mb-3 p-3">
  <p><strong>Nama:</strong> {{ profil[3] }}</p>
  <p><strong>Bio:</strong> {{ profil[4] }}</p>
  {% if profil[5] %}
  <img src="{{ url_for('static', filename=profil[5]) }}" width="150" class="rounded">
  {% endif %}
  <div>
    <a href="{{ url_for('edit_profile') }}" class="btn btn-warning btn-sm">Edit Profil</a>
  </div>
</div>
{% else %}
<p>Belum ada data profil.</p>
{% endif %}

<hr>
<h4>Daftar Skill</h4>

<form action="{{url_for('add_skills')}}" method="post" enctype="multipart/form-data" class="mb-3">
    <div class="row g-2">
        <div class="col-md-4">
            <input type="text" name="name" placeholder="Nama Skill" class="form-control" required>
        </div>
        <div class="col-md-4">
            <input type="text" name="level" placeholder="Level Skill" class="form-control" required>
        </div>
        <div class="col-md-4">
            <input type="file" name="icon" class="form-control" accept="image/*">
        </div>
        <div class="col-md-2">
            <button class="btn btn-success btn-sm">Tambah Skills</button>
        </div>
    </div>
</form>

<table class="table table-bordered">
    <thead>
        <tr>
        <th>Nama Skill</th>
        <th>Level Skill</th>
        <th>Icon</th>
        </tr>
    </thead>

    <tbody>
        {% for s in skills %}
        <tr>
            <td>{{s[1]}}</td>
            <td>{{s[2]}}</td>
            <td>
                {% if s[3] %}
                    <img src="{{ url_for('static', filename=s[3]) }}" width="50">
                {% endif %}
            <td>
                <form action="{{url_for('delete_skills', id=s[0])}}" method="get" style="display:inline;">
                    <button class="btn btn-danger btn-sm">Hapus</button>
                </form>
                <form action="{{url_for('update_skills', id=s[0])}}" method="post" enctype="multipart/form-data" style="display:inline;">
                    <input type="text" name="new_name" placeholder="Nama baru" required>
                    <input type="text" name="new_level" placeholder="Level baru" required>
                    <input type="file" name="icon" class="form-control-sm" accept="image/*">
                    <button class="btn btn-warning btn-sm">Update</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
<hr>
<h4>Project</h4>

<form action="{{url_for('add_projects')}}" method="post"class="mb-3"  enctype="multipart/form-data">
    <div class="row g-2">
        <div class="col-md-4">
            <input type="text" name="title" placeholder="Judul Project" class="form-control" required>
        </div>
        <div class="col-md-6">
            <input type="text" name="description" placeholder="Deskripsi Project" class="form-control" required>
        </div>
        <div class="col-md-4">
            <input type="text" name="link" placeholder="Link Project" class="form-control" required>
        </div>
        <div class="col-md-4">
            <input type="file" name="image" class="form-control" accept="image/*">
        </div>
        <div class="col-md-2 mt-2">
            <button class="btn btn-success btn-sm">Tambah Project</button>
        </div>
    </div>
</form>
<table class="table table-bordered">
    <thead>
        <tr>
        <th>Judul Project</th>
        <th>Deskripsi Project</th>
        <th>Image</th>
        <th>Link</th>
        </tr>
    </thead>
    <tbody>
        {% for p in projects %}
        <tr>
            <td>{{p[1]}}</td>
            <td>{{p[2]}}</td>
            <td>
                {% if p[3] %}
                    <img src="{{ url_for('static', filename=p[3])}}" width="70">
                {% endif %}
            </td>
            <td>
                {% if p[4] %}
                    <a href="{{ p[4] }}" target="_blank">Lihat</a>
                {% endif %}
            </td>
            <td>
                <form action="{{url_for('delete_projects', id=p[0])}}" method="get" style="display:inline;">
                    <button class="btn btn-danger btn-sm">Hapus</button>
                </form>
                <form action="{{url_for('update_projects', id=p[0])}}" method="post" enctype="multipart/form-data" style="display:inline;">
                    <input type="text" name="new_title" placeholder="Judul baru" required>
                    <input type="text" name="new_description" placeholder="Deskripsi baru" required>
                    <input type="text" name="new_link" placeholder="Link baru" required>
                    <input type="file" name="image" class="form-control-sm" accept="image/*">
                    <button class="btn btn-warning btn-sm">Update</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>


{% endblock %}